//     Backbone Events 0.0.1
//
//     by Ian Storm Taylor
//     https://github.com/ianstormtaylor/backbone-events
(function(e,t){if(e===undefined)throw new Error("Couldn't find Underscore");if(t===undefined)throw new Error("Couldn't find Backbone");t.mixin||(t.mixin={}),t.mixin.events=function(){var e=/\s*,\s*/,n=/\./g;this.prototype.delegateBackboneEvents=function(r){r||(r=this.backboneEvents)||(r={}),this._backboneEvents||(this._backboneEvents=[]),this.undelegateBackboneEvents();for(var i in r){var s=i.split(e),o=typeof r[i]=="string"?[r[i]]:r[i],u=s[s.length-1];if(u===undefined)throw new Error("Invalid event: "+i);var a=this;if(s.length===2){var f=s[0].split(n);a=this[f[0]];for(var l=1,c;c=f[l];l++)a=a instanceof t.Model?a.get(c):a[c]}for(var h=0,p;p=o[h];h++){p=p.split(e);var d=p[0].split(n),v=d[1]?this[d[0]][d[1]]:this[d[0]];if(v===undefined)throw new Error("Cant find method: "+p[0]);var m=this;p[1]&&this[p[1]]&&p[1]!=="this"?m=this[p[1]]:d[1]&&this[d[0]]&&(m=this[d[0]]),a&&(a.on(u,v,m),this._backboneEvents.push([a,u,v,m]))}}},this.prototype.undelegateBackboneEvents=function(){if(!this._backboneEvents||this._backboneEvents.length===0)return;for(var e=0,t;t=this._backboneEvents[e];e++)t[0].off(t[1],t[2],t[3])}}})(_,Backbone);