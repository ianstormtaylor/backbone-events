//     Backbone Events 0.0.1
//
//     by Ian Storm Taylor
//     https://github.com/ianstormtaylor/backbone-events
(function(e,t){if(e===undefined)throw new Error("Couldn't find Underscore");if(t===undefined)throw new Error("Couldn't find Backbone");t.mixin||(t.mixin={}),t.mixin.events=function(){var e=/\s*,\s*/,t=/\./g;this.prototype.delegateBackboneEvents=function(n){n||(n=this.backboneEvents)||(n={}),this._backboneEvents||(this._backboneEvents=[]),this.undelegateBackboneEvents();for(var r in n){var i=r.split(e),s=typeof n[r]=="string"?[n[r]]:n[r],o=i[i.length-1];if(o===undefined)throw new Error("Invalid event: "+r);var u=this;if(i.length===2){var a=i[0].split(t);for(var f=0,l;l=a[f];f++)u=!u[l]&&u.get?u.get(l):u[l]}for(var c=0,h;h=s[c];c++){h=h.split(e);var p=h[0].split(t),d=p[1]?this[p[0]][p[1]]:this[p[0]];if(d===undefined)throw new Error("Cant find method: "+h[0]);var v=this;h[1]&&this[h[1]]&&h[1]!=="this"?v=this[h[1]]:p[1]&&this[p[0]]&&(v=this[p[0]]),u&&(u.on(o,d,v),this._backboneEvents.push([u,o,d,v]))}}},this.prototype.undelegateBackboneEvents=function(){if(!this._backboneEvents||this._backboneEvents.length===0)return;for(var e=0,t;t=this._backboneEvents[e];e++)t[0].off(t[1],t[2],t[3])}}})(_,Backbone);